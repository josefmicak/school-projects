
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
    <script src="https://unpkg.com/jquery/dist/jquery.min.js"></script>
<script > 

var namesND = ["kozoroh", "vodnar","ryby","beran","byk","blizenci","rak","lev","panna","vahy","stir","strelec"];
var breakDate = [21,20,21,21,21,22,23,24,23,23,23,22];
var globalMonth = 1;

var zodiacIndex;

document.addEventListener('init', function(event) {
    var page = event.target;
    
    // po nacteni stranky zobranim aktualni datum a poslu ho do funkce setZodiac
    if (page.id === 'page1') 
    {
        var myDate = new Date();
        document.getElementById("dateInput").valueAsDate = myDate; 
        setZodiac(myDate);
    } 
 
});

//na zaklade data zvolit spravne znameni - obrazek + jmeno
function setZodiac(myDate)
{   
    var year = myDate.getFullYear();
    var month = myDate.getMonth()+1; //January is 0
    var day = myDate.getDate();
    var monthID = month-1;

    for (i = 0; i < 5; i++) {
      var num = i*2;
      console.log("num : " + num);
    }

    //console.log("year : " + year);
    //alert("year: " + year + " month: " + month + " day: " + day);
    
    //TODO 1. bere v potaz pouze mesice - nutne upravit i na dny
    if(day >= breakDate[monthID]){
        zodiacIndex = monthID+1;
        if(monthID + 1 >= 12){
            zodiacIndex = 0;
        }
    }
    else{
        zodiacIndex = monthID;
    }
    var path = "drawable/"+namesND[zodiacIndex]+".png";   
    document.getElementById("zodImg").src = path;
    
    //TODO 2. upravit aby se zobrazoval spravne jmeno znameni 
    document.getElementById('zodiacName').innerHTML = (namesND[zodiacIndex]);
    
    globalMonth = month;   
    
}

// klik na obrazek znameni spusti dialog se zakladni informaci o danem znameni a nabidne zobrazeni aktualniho horoskopu
var showTemplateDialog = function() {
    // TODO 3. zobrazit informace o znameni
    // napriklad: https://www.horoskopy.cz/charakteristika/beran
    // https://www.w3schools.com/js/js_switch.asp
    // https://www.w3schools.com/js/js_if_else.asp
    //var namesND = ["kozoroh", "vodnar","ryby","beran","byk","blizenci","rak","lev","panna","vahy","stir","strelec"];
    var info = "";
    switch(namesND[zodiacIndex]){
        case "kozoroh":
            info = "Pro Kozorohy je typická ambiciózní a cílevědomá povaha. Toto znamení je pod vládou živlu Země, úspěch je pro jeho zrozence velmi důležitý. Touží po uznání. Myslí dlouhodobě a dokážou se pro své cíle ledasčeho příjemného zříct. Jsou spolehliví a odpovědní. Svou povahou jsou introverti a hloubky jejich duše zná jen pár blízkých přátel, před ostatními skrývají své zranitelné nitro pod pevnou slupkou.";
            break;
        case "vodnar":
            info = "Vodnáře jen tak snadno nepřehlédnete, rádi plavou proti proudu a mívají velmi originální myšlenky a neobvyklý životní styl. Největšími hodnotami pro tyto zvláštní osobnosti je svoboda a přátelství a jejich myšlení je o krok napřed oproti své době. Pro své idealistické názory se často potýkají s nepochopením. Vodnáři jsou pod vládou živlu vzduchu, jenž jim dává bystré myšlení a touhu šířit poznání.";
            break;
        case "ryby":
            info = "Lidé narozeni pod vládou vodního znamení Ryb jsou jemné a klidné povahy a duchovního založení. Nadevše si cení harmonii a mají mimořádně silně vyvinutou intuici. Často vidí věci, které zůstávají jejich okolí skryté. Ryby jsou citlivé a vnímavé bytosti, které rády pomáhají ostatním. Ve společnosti jsou přizpůsobivé a drží se raději v pozadí. Vlastní názor jim nechybí, ale nechávají si ho pro sebe.";
            break;
        case "beran":
            info = "Beranům vládne živel ohně a lidé narození v tomto znamení proto překypují životní energií. Jsou průbojní a ambiciózní, když se pro něco nadchnou. Chtěli by mít všechno hned a umí si prosadit to, po čem touží. V životě to mohou díky těmto vlastnostem dotáhnout hodně daleko, ale jako daň za to se často zapletou do sporů a hádek. Provází je až dětská radost ze života, jsou spontánní a bezstarostní.";
            break;
        case "byk":
            info = "Býci jsou ovlivňováni živlem země a to jim dává smysl pro praktické a materiální záležitosti. Mají klidnou a vyrovnanou povahu a hlavním smyslem jejich života bývá práce. Když se nadchnou pro nějakou myšlenku, rádi budou tvrdě a neúnavně pracovat na jejím uskutečnění. K životu se staví velmi zodpovědně. Hodně důležité je pro ně hmotné zázemí, rádi se obklopují hezkými věcmi a dokážou ocenit luxus.";
            break;
        case "blizenci":
            info = "Blíženci jsou lidé vnímavé a přizpůsobivé povahy a intelektuálního založení. Tito idealisté si libují ve filosofii a baví je zkoumat názory jiných lidí. Mohou se pochlubit širokým okruhem zájmů a žijí činorodým a aktivním životem. Jejich myšlenky a pocity se pohybují závratnou rychlostí a mají vynikající komunikační schopnosti. Jsou to lidé živlu vzduchu a ukrývají se v nich dvě různé osobnosti.";
            break;
        case "rak":
            info = "Vodní živel propůjčuje Rakům velkou citlivost a vnímavost. Jsou to emocionálně založení lidé, ale rozhodně jim nechybí jak logické uvažování, tak analytické schopnosti. Díky své empatii se vždy snaží pomáhat slabším, ale přesto je potěší, když se jim povede získat si respekt za svůj vlastní názor. Mají velmi vyvinutý cit pro mezilidské vztahy. V životě si zakládají na rodině, domovu a tradicích.";
            break;
        case "lev":
            info = "Zrozenci ve znamení Lva jsou rodilými vůdci, kteří jsou předurčeni k pozicím, kde mohou uplatnit svoji přirozenou autoritu. Jsou to charismatické osobnosti stvořené k tomu, aby stály v centru pozornosti, a to v tom nejlepším slova smyslu. V kariéře jim velmi pomáhá organizační a diplomatický talent. Rádi se chlubí svými úspěchy a kritiku nenesou právě nejlépe. Jsou to však velmi dobrosrdeční lidé.";
            break;
        case "panna":
            info = "Lidé narozeni v zemském znamení Panny jsou obdařeni pečlivostí, logickým myšlením a trpělivostí. Jsou pracovití a mají velký smysl pro detail. Jsou to spíš realisté než snílci, stojí nohama pevně na zemi. Mají sklon k perfekcionismu a k věcem se staví kriticky. Často je najdeme v pečovatelských pozicích, rádi pomáhají ostatním a velmi důležité pro ně bývá zdraví, čistota a pořádek ve všem, co dělají.";
            break;
        case "vahy":
            info = "Váhy jsou intelektuálně založení lidé jemné povahy a ovládá je znamení vzduchu. V životě usilují o harmonii a soulad a mají buňky pro umění, často bývají sami velmi tvořiví. Mají smysl pro férovou hru. V každé své činnosti usilují o klid a rovnováhu, spěchu a stresu se vyhýbají. Z toho pramení jejich příslovečná nerozhodnost. Často si nemohou vybrat mezi protichůdnými názory a hledají kompromisy.";
            break;
        case "stir":
            info = "Štíři jsou pod vládou vodního živlu a vody jejich duše jsou hluboké. Na první pohled působí pasivně a nenápadně, ale skrývají v sobě dost energie. Vždy si rádi počkají na správnou chvíli a dokážou čekat dlouho. Mají silnou vůli a vřelé city. Není snadné je vyvést z míry, ale na staré křivdy nezapomínají a umí je oplatit. Mají silně vyvinutou intuici, přísný úsudek a vrozený psychologický talent.";
            break;
        case "strelec":
            info = "Ohnivé znamení Střelce vyniká svým idealismem a upřímností. Jeho zrozenci se dívají do dálky za velkými ideály a jejich život bývá aktivní a dobrodružný. Udělají hodně pro to, aby se mohli věnovat tomu, čemu věří a co je baví. Důležitá je svoboda. Jsou upřímní a v každé situaci pravdomluvní, intriky jsou Střelcům cizí a občas je někdo může nařknout z nedostatku taktu. Touží po pravdě a poznání.";
            break;
    }
    
    document.getElementById("p1").innerHTML = info;

    // TODO 5 - BONUS - zobrazi zivotni cislo
    // http://numerologie.najdise.cz/zivotni-cislo
    var myDate = new Date(document.getElementById("dateInput").value);
    var year = myDate.getFullYear();
    var month = myDate.getMonth()+1; //January is 0
    var day = myDate.getDate();
    
    var dateString = day.toString() + month.toString() + year.toString();
    document.getElementById("p2").innerHTML = getLifeNumber(dateString);

    var dialog = document.getElementById('my-dialog');
    dialog.show();

};

function getLifeNumber(dateString){
    var lifeNumber = 0;
    
    for(var i = 0; i < dateString.length; i++){
        lifeNumber += parseInt(dateString[i]);
    }
    
    if(lifeNumber > 9){
        return getLifeNumber(lifeNumber.toString());
    }
    else{
        return lifeNumber;
    }
}

var hideDialog = function(id) {
  document
    .getElementById(id)
    .hide();
};

function loadURL()
{
    var name = namesND[zodiacIndex];
    alert(name);
    window.location.href = "http://www.horoskopy.cz/" + name;
    //TODO 4. zobrazeni aktualniho horoskopu
    // "http://www.horoskopy.cz/" + name
    //https://www.w3schools.com/js/js_window_location.asp
}

</script>  
  
</head>
<body>

<ons-page id="page1">
    <ons-toolbar>
        <div class="center" style="font-size:200%">
        Zodiac
        </div>
    </ons-toolbar>

    <p style="text-align: center"> <input style="font-size:200%" id="dateInput" type="date" modifier="underbar material" onchange="setZodiac(new Date(this.value));"></input> </p>

    <p style="text-align: center">
        <img onclick="showTemplateDialog()" id="zodImg" style="width: 30%; height: auto">
    </p>
    <p style="text-align: center; font-size:300%" id="zodiacName"> Zodiac </p>

</ons-page>

<ons-dialog id="my-dialog">
<div style="text-align: center; padding: 10px;">    
    <p id="p1"></p>
    <p id="p2"></p>
    <p> <ons-button onclick="hideDialog('my-dialog')">Close</ons-button> </p>
    <p> <ons-button onclick="loadURL()">Watch</ons-button> </p>
    </div>
</ons-dialog>

</body>
</html>
